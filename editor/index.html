<!DOCTYPE html>
<html>
<head>
<title>Editor</title>
<link href="https://fonts.googleapis.com/css2?family=Material+Icons" rel="stylesheet">
<link rel="icon" href="images/favicon.png" type="image/png" id="favicon"/>
<link href="style.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Material+Icons" rel="stylesheet">
<link rel="manifest" href="manifest.json" id="manifest">
</head>
<body>
<img id="img" src="background.png" crossorigin="anonymous" style="width:2000px;opacity:0.001;z-index:-1000;">
<!-- alert box -->
<div id="alert">
<p id="alert-message">There was an error loading this page. Try refreshing the page and making sure javascript is on.</p>
<button onclick="hide(notification)">Close</button>
</div>
<!-- photo area -->
<div id="page">
  <canvas id="canvas" width="2000" height="1500"></canvas>
  <br><br>
</div>
<!-- control area -->
<div id="sidebar" onclick="backup()">
<button class="fillWidth sidebarButton" onclick="webAppWindow('files/index.html')">Projects <span class="material-icons">source</span></button>
<button class="fillWidth sidebarButton" onclick="webAppWindow('index.html')">New file <span class="material-icons">add</span></button>
<br><br>
<button class="fillWidth sidebarButton" onclick="fillPage()">Fill page <span class="material-icons">format_color_fill</span></button>
<button class="fillWidth sidebarButton" onclick="addImage()">Add image <span class="material-icons">camera_roll</span></button>
<button class="fillWidth sidebarButton" onclick="addText()">Add text <span class="material-icons">text_fields</span></button>
<br><br>
<button class="fillWidth sidebarButton" onclick="brushSize()">Brush size <span class="material-icons">brush</span></button>
<button class="fillWidth sidebarButton" onclick="brushColor()">Brush color <span class="material-icons">palette</span></button>
<button class="fillWidth sidebarButton" onclick="unselectBrush()">Unselect brush</button>
<br><br>
<button class="fillWidth sidebarButton" onclick="setBlur()">Blur <span class="material-icons">blur_on</span></button>
<button class="fillWidth sidebarButton" onclick="setContrast()">Contrast <span class="material-icons">contrast</span></button>
<button class="fillWidth sidebarButton" onclick="setExposure()">Brightness <span class="material-icons">light_mode</span></button>
<button class="fillWidth sidebarButton" onclick="setHueRotate()">Hue adjust <span class="material-icons">opacity</span></button>
<br><br>
<button class="fillWidth sidebarButton" onclick="saveFile()">Save <span class="material-icons">save</span></button>
<button class="fillWidth sidebarButton" onclick="details()">Details <span class="material-icons">folder</span></button>
<button class="fillWidth sidebarButton" onclick="unselectBrush(); notify('Large files may take longer to load. If unable to export, right click on image for options.'); exportF()" id="ee">Export <span class="material-icons">download</span></button>
<br><br>
<a href="help/index.html" target="_blank">
<button class="fillWidth sidebarButton">Help <span class="material-icons">help_outline</span></button>
</a>
<button class="fillWidth sidebarButton" onclick="notify(app.about)">About Editor</button>
</div>
<!-- export -->
<div id="shadow"></div>
<div id="export-page">
<img id="export-img" src="">
<p id="export-data">Image preview</p>
<textarea id="export-link" readonly>There was an error loading the image link.</textarea>
<a href="" id="export-download" download>
  <button>Download (.png)</button>
</a>
<button onclick="copyFileLink()">Copy link</button>
<button onclick="hide(shadow); hide(exportPage); hide(notification)">Cancel</button>
</div>

<!-- for pwa -->
<script>
	window.addEventListener('load', () => {
	registerSW();
	});

	// Register the Service Worker
	async function registerSW() {
	if ('serviceWorker' in navigator) {
		try {
		await navigator
				.serviceWorker
				.register('serviceworker.js');
		}
		catch (e) {
		console.log('SW registration failed');
		}
	}
	}
</script>
<script>
if (navigator.platform.indexOf("Mac") != -1) {
document.getElementById("manifest").href = "macManifest.json";
}
</script>
<script src="app.js"></script>
</body>
</html>
